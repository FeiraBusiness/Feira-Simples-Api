  <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulário de Pedido</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 20px;
    }
    .container {
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      padding: 20px;
      width: 50%;
      margin: 0 auto;
    }
    form {
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    label {
      display: block;
      margin-top: 10px;
      color: #555;
    }
    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
<div class="container">
  <h1>Formulário de Pedido</h1>

  <!-- Formulário para adicionar novo pedido -->
  <form id="orderForm">
    <label for="customer">Cliente ID:</label>
    <input type="text" id="customer" name="customer" value="cd3f3096-cbf5-4323-9784-692457e81b5b" placeholder="ID do Cliente" required>

    <label for="seller">Vendedor ID:</label>
    <input type="text" id="seller" name="seller" value="c6a4a307-4f10-48cf-a63d-8a156747e1fc" placeholder="ID do Vendedor" required>

    <label for="discount">Desconto:</label>
    <input type="number" id="discount" name="discount" value="0" placeholder="Desconto" required>

    <label for="increase">Acréscimo:</label>
    <input type="number" id="increase" name="increase" value="0" placeholder="Acréscimo" required>

    <label for="netValue">Valor Líquido:</label>
    <input type="number" id="netValue" name="netValue" value="0" placeholder="Valor Líquido" required>

    <label>Itens do Pedido:</label>
    <div id="itemsContainer">
      <!-- Campos para adicionar cada item do pedido -->
      <div class="item">
        <label for="quantity">Quantidade:</label>
        <input type="number" id="quantity" name="quantity" value="0" placeholder="Quantidade" required>

        <label for="unitaryValue">Valor Unitário:</label>
        <input type="number" id="unitaryValue" name="unitaryValue" value="0" placeholder="Valor Unitário" required>

        <label>Produto:</label>
        <input type="text" id="productCode" name="productCode" value="string" placeholder="Código do Produto" required>
        <input type="text" id="productName" name="productName" value="string" placeholder="Nome do Produto" required>
        <input type="text" id="productDescription" name="productDescription" value="string" placeholder="Descrição do Produto" required>
        <input type="number" id="productValue" name="productValue" value="0" placeholder="Valor do Produto" required>
        <input type="text" id="productCategory" name="productCategory" value="string" placeholder="Categoria do Produto" required>
        <input type="text" id="productImageUrl" name="productImageUrl" value="string" placeholder="URL da Imagem do Produto" required>
        <input type="number" id="productWeight" name="productWeight" value="0" placeholder="Peso do Produto" required>
        <input type="number" id="productRating" name="productRating" value="0" placeholder="Avaliação do Produto" required>
        <input type="checkbox" id="productIsActive" name="productIsActive" checked>
        <label for="productIsActive">Produto Ativo</label>
        <input type="date" id="productExpirationDate" name="productExpirationDate" value="2022-03-10" required>
        <input type="datetime-local" id="productCreatedAt" name="productCreatedAt" value="2022-03-10T12:15:50" required>
        <input type="datetime-local" id="productUpdatedAt" name="productUpdatedAt" value="2022-03-10T12:15:50" required>
      </div>
    </div>

    <label for="status">Status do Pedido:</label>
    <select id="status" name="status" required>
      <option value="PENDING" selected>Pendente</option>
      <option value="PROCESSING">Processando</option>
      <option value="SHIPPED">Enviado</option>
      <option value="DELIVERED">Entregue</option>
      <option value="CANCELLED">Cancelado</option>
    </select>

    <label for="createdAt">Criado em:</label>
    <input type="datetime-local" id="createdAt" name="createdAt" value="2022-03-10T12:15:50" required>

    <label for="updatedAt">Atualizado em:</label>
    <input type="datetime-local" id="updatedAt" name="updatedAt" value="2022-03-10T12:15:50" required>

    <button type="button" onclick="createOrder()">Criar Pedido</button>
  </form>
</div>

<script>
  async function createOrder() {
    const form = document.getElementById('orderForm');

    // Coletar os dados do formulário
    const data = {
      customer: form.customer.value,
      seller: form.seller.value,
      discount: parseInt(form.discount.value),
      increase: parseInt(form.increase.value),
      netValue: parseInt(form.netValue.value),
      items: [
        {
          quantity: parseInt(form.quantity.value),
          unitaryValue: parseInt(form.unitaryValue.value),
          product: {
            code: form.productCode.value,
            name: form.productName.value,
            description: form.productDescription.value,
            value: parseInt(form.productValue.value),
            category: form.productCategory.value,
            imageUrl: form.productImageUrl.value,
            weight: parseFloat(form.productWeight.value),
            rating: parseFloat(form.productRating.value),
            isActive: form.productIsActive.checked,
            expirationDate: form.productExpirationDate.value,
            createdAt: form.productCreatedAt.value,
            updatedAt: form.productUpdatedAt.value
          },
          createAt: form.createdAt.value,
          updatedAt: form.updatedAt.value,
          createdAt: form.createdAt.value
        }
      ],
      status: form.status.value,
      createdAt: form.createdAt.value,
      updatedAt: form.updatedAt.value,
      enumOrderStatus: form.status.value
    };

    try {
      const response = await fetch('http://localhost:8080/api/order', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      });

      if (response.ok) {
        const result = await response.json();
        alert('Pedido criado com sucesso!');
        console.log(result);
        // Limpar o formulário após o envio bem-sucedido
        form.reset();
      } else {
        const errorData = await response.json();
        alert('Erro ao criar pedido: ' + errorData.message);
        console.error('Erro:', response.statusText, errorData);
      }
    } catch (error) {
      alert('Erro ao criar pedido.');
      console.error('Erro:', error);
    }
  }
</script>
</body>
</html>
